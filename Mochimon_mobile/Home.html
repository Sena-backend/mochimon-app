<!DOCTYPE html>
<html lang="ja">
    <head>
        <script type="text/javascript">
            /*
            if (!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)) {
                window.location.href = '../Mochimon_pc/Home.html';
            }
            */
        </script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="Home.css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
        <title>ホーム</title>
    </head>

    <body>
        <div class="header-area">
            <button class="hamburger-button" aria-label="menu">
                <span>
                    <i class="fa-solid fa-suitcase-rolling"></i>
                </span>
            </button>

            <h1>Mochimon</h1>
            
            <a id="user-icon-btn" href="#" class="login-button">
                <span>
                    <i class="fa-regular fa-user"></i>
                </span>
            </a>
        </div>


        <div class="dashboard">
            <div class="card">
            <h2>会議</h2>
            <p>2025年6月20日</p>
            <p>14:00 ～ 15:00</p>
            </div>

            <div class="card">
            <h2>打ち合わせ</h2>
            <p>2025年6月20日</p>
            <p>16:00 ～ 17:00</p>
            </div>

            <div class="card">
            <h2>出張</h2>
            <p>2025年6月22日</p>
            <p>16:00 ～ 17:00</p>
            </div>

            <div class="card">
            <h2>会議</h2>
            <p>2025年6月20日</p>
            <p>14:00 ～ 15:00</p>
            </div>

            <div class="card">
            <h2>打ち合わせ</h2>
            <p>2025年6月20日</p>
            <p>16:00 ～ 17:00</p>
            </div>

            <div class="card">
            <h2>出張</h2>
            <p>2025年6月22日</p>
            <p>16:00 ～ 17:00</p>
            </div>

        </div>
        <nav class="bottom-menu">
            <a href="#" class="menu-button">
                <span class="select">
                    <i class="fa-solid fa-house"></i>
                </span>
                <p class="select">ホーム</p>
            </a>
            <a href="Calendar.html" class="menu-button">
                <span>
                    <i class="fa-regular fa-calendar-days"></i>
                </span>
                <p>カレンダー</p>
            </a>
            <a href="Template.html" class="menu-button">
                <span>
                    <i class="fa-solid fa-bookmark"></i>
                </span>
                <p>テンプレート</p>
            </a>
            <a href="Shopping.html" class="menu-button">
                <span>
                    <i class="fa-solid fa-cart-shopping"></i>
                </span>
                <p>買い物リスト</p>
            </a>
            <a href="Share.html" class="menu-button">
                <span>
                    <i class="fa-solid fa-share-nodes"></i>
                </span>
                <p>共有</p>
            </a>
        </nav>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-analytics.js";
            import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";

            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyChPt5NDvgd4okxbUQalZtrS7w6Tm30fgg",
                authDomain: "mochimon-base.firebaseapp.com",
                projectId: "mochimon-base",
                storageBucket: "mochimon-base.firebasestorage.app",
                messagingSenderId: "5202457046",
                appId: "1:5202457046:web:7233c6b556a7d260803477",
                measurementId: "G-GPT541EW6S"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            const auth = getAuth(app);
            const iconBtn = document.getElementById("user-icon-btn");
            let currentUser = null;

            // ユーザーの認証状態が変わるたびにcurrentUserにセット
            onAuthStateChanged(auth, (user) => {
            currentUser = user;
            console.log("Auth state changed:", user);
            });
            
            
                if (iconBtn) {
                    iconBtn.addEventListener("click", async (e) => {
                        e.preventDefault();
                        console.log("Clicked. currentUser:", currentUser);
                        if (currentUser) {
                        console.log("認証済みなのでマイページへ遷移");
                        window.location.href = "../Mypage.html";
                        } else {
                        console.log("未認証なのでログインへ遷移");
                        window.location.href = "../Login.html";
                        }
                    });
                }

        </script>
    </body>

</html>